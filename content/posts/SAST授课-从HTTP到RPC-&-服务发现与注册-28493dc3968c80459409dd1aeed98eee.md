---
title: "SASTæˆè¯¾-ä»HTTPåˆ°RPC & æœåŠ¡å‘ç°ä¸æ³¨å†Œ"
date: "2025-10-06T07:06:00.000Z"
lastmod: "2025-10-06T08:09:00.000Z"
draft: false
series: []
æ—¥æœŸ: "2024-03-19"
authors:
  - "Whitea"
tags:
  - "æˆè¯¾"
categories:
  - "æŠ€æœ¯"
Last edited time: "2024-03-19"
summary: "SASTæˆè¯¾"
NOTION_METADATA:
  object: "page"
  id: "28493dc3-968c-8045-9409-dd1aeed98eee"
  created_time: "2025-10-06T07:06:00.000Z"
  last_edited_time: "2025-10-06T08:09:00.000Z"
  created_by:
    object: "user"
    id: "102d872b-594c-81b1-ab63-0002c10e95af"
  last_edited_by:
    object: "user"
    id: "102d872b-594c-81b1-ab63-0002c10e95af"
  cover: null
  icon: null
  parent:
    type: "database_id"
    database_id: "28393dc3-968c-8157-9edc-c528b069ca6f"
  archived: false
  in_trash: false
  is_locked: false
  properties:
    series:
      id: "B%3C%3FS"
      type: "multi_select"
      multi_select: []
    æ—¥æœŸ:
      id: "C%3CqD"
      type: "date"
      date:
        start: "2024-03-19"
        end: null
        time_zone: null
    draft:
      id: "JiWU"
      type: "checkbox"
      checkbox: false
    authors:
      id: "bK%3B%5B"
      type: "people"
      people:
        - object: "user"
          id: "102d872b-594c-81b1-ab63-0002c10e95af"
          name: "Whitea"
          avatar_url: "https://s3-us-west-2.amazonaws.com/public.notion-static.com/529138\
            7a-5664-4f8d-a6b4-c9f1e5bc89da/avater.png"
          type: "person"
          person:
            email: "whitea0029@gmail.com"
    custom-front-matter:
      id: "c~kA"
      type: "rich_text"
      rich_text: []
    tags:
      id: "jw%7CC"
      type: "multi_select"
      multi_select:
        - id: "c4241bd5-b43c-47ee-a0c2-f64f5afd4539"
          name: "æˆè¯¾"
          color: "red"
    categories:
      id: "nbY%3F"
      type: "multi_select"
      multi_select:
        - id: "2df927de-e471-4f86-9001-37b594f12911"
          name: "æŠ€æœ¯"
          color: "gray"
    Last edited time:
      id: "vbGE"
      type: "date"
      date:
        start: "2024-03-19"
        end: null
        time_zone: null
    summary:
      id: "x%3AlD"
      type: "rich_text"
      rich_text:
        - type: "text"
          text:
            content: "SASTæˆè¯¾"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "SASTæˆè¯¾"
          href: null
    Name:
      id: "title"
      type: "title"
      title:
        - type: "text"
          text:
            content: "SASTæˆè¯¾-ä»HTTPåˆ°RPC & æœåŠ¡å‘ç°ä¸æ³¨å†Œ"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "SASTæˆè¯¾-ä»HTTPåˆ°RPC & æœåŠ¡å‘ç°ä¸æ³¨å†Œ"
          href: null
  url: "https://www.notion.so/SAST-HTTP-RPC-28493dc3968c80459409dd1aeed98eee"
  public_url: null
MANAGED_BY_NOTION_HUGO: true

---


## æˆ‘æƒ³å…ˆè¯´è¯´ TCP


å¤§å®¶å¦‚æœåœ¨å¼€å‘æ—¶å€™é‡åˆ°å¸Œæœ›ä¸åŒè¿›ç¨‹å¯ä»¥é€šè®¯ï¼Œå¸¸ç”¨åˆ°çš„å°±æ˜¯ Socket ç¼–ç¨‹ï¼Œè¿™æ˜¯ä¸€ç§é¢å‘ä¼ è¾“å±‚çš„ç½‘ç»œç¼–ç¨‹æ–¹å¼ï¼Œæ— éå°±æ˜¯ TCP æˆ–è€… UDPã€‚
å¤§éƒ¨åˆ†äººæ— è„‘é€‰æ‹© TCP å°±å¥½äº†


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-802e-a85c-f64e0e4213ed)


è¿™æ˜¯ä¸€ç§åŸºäºå­—èŠ‚æµçš„ä¼ è¾“æ–¹å¼ï¼Œå°±è¿™æ ·ä¸€ä¸ªè£¸çš„TCPå°±å¯ä»¥è§£å†³æˆ‘ä»¬æ”¶å‘æ•°æ®çš„å…¨éƒ¨é—®é¢˜äº†ä¹ˆï¼Ÿ


## è£¸TCPçš„é—®é¢˜


å…«è‚¡æ–‡å¸¸èƒŒï¼ŒTCP æ˜¯æœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼Œ**é¢å‘è¿æ¥ã€å¯é ã€åŸºäºå­—èŠ‚æµ**
æˆ‘ä»¬ä»Šå¤©é‡ç‚¹å…³æ³¨çš„æ˜¯åŸºäºå­—èŠ‚æµè¿™ä¸ªç‰¹ç‚¹
å­—èŠ‚æµå¯ä»¥ç†è§£æˆä¸€ä¸ªåŒå‘é€šé“é‡Œé¢æµæ·Œçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œè¯´ç™½äº†ä¹Ÿå°±æ˜¯ä¸€ä¸²`01`ä¸²ï¼Œçº¯è£¸ TCP åœ¨æ”¶å‘è¿™ä¸€å † `01` ä¸²çš„æ—¶å€™æ˜¯æ²¡æœ‰ä»»ä½•è¾¹ç•Œçš„ï¼Œ
å®ƒæ ¹æœ¬ä¸çŸ¥é“ä»å“ªåˆ°å“ªæ‰æ˜¯ä¸€æ¡å®Œæ•´çš„æ¶ˆæ¯ã€‚


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8089-8c63-ffdf32db8bff)


ä¸Šé¢è¿™å¼ å›¾å°±æ˜¯ç²˜åŒ…é—®é¢˜
å› æ­¤å¾ˆæ˜¾ç„¶ï¼Œçº¯è£¸çš„ TCP æ˜¯ä¸é€‚åˆç›´æ¥æ‹¿è¿‡æ¥ç”¨çš„ï¼Œéœ€è¦åˆ¶å®šä¸€äº›è§„åˆ™ç”¨äºåŒºåˆ†**æ¶ˆæ¯çš„è¾¹ç•Œ**
æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠæ¶ˆæ¯å°è£…ä¸€ä¸‹ï¼Œåˆ†ä¸º Header å’Œ Body, Header ç”¨äºå­˜æ”¾ä¸€äº›å…ƒæ•°æ®ï¼Œæ¯”å¦‚è¿™ä¸ªæ¶ˆæ¯æœ‰å¤šé•¿ï¼Œ Body ç”¨äºå­˜æ”¾çœŸæ­£çš„æ¶ˆæ¯


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-805b-9770-c82bab0b2932)


è¿™æ ·å°è£…æ–¹å¼ï¼Œåªè¦æ”¶å‘ä¿¡æ¯çš„ä¸Šä¸‹æ¸¸çº¦å®šå¥½ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åè®®
å› æ­¤åŸºäº TCP å°±è¡ç”Ÿå‡ºå¾ˆå¤šçš„åè®®ï¼Œæ¯”å¦‚ HTTP å’Œ RPC


## HTTP å’Œ RPC


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-804d-97ba-c201470e22cc)

- **HTTPåè®®**ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®® ï¼ˆHTTPï¼‰ æ˜¯ä¸€ç§ç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£ï¼ˆå¦‚ HTMLï¼‰çš„åº”ç”¨å±‚åè®®ã€‚å®ƒä¸“ä¸º Web æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è€Œè®¾è®¡ï¼Œä½†ä¹Ÿå¯ç”¨äºå…¶ä»–ç›®çš„ï¼Œä¾‹å¦‚æœºå™¨å¯¹æœºå™¨é€šä¿¡ã€å¯¹ API çš„ç¼–ç¨‹è®¿é—®ç­‰
- **RPC**ï¼šRPCåè®®æ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œä½¿å¾—ä¸åŒç³»ç»Ÿé—´å¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è¿›è¡Œé€šä¿¡

è¿™ä¸¤ä¸ªéƒ½æ˜¯åº”ç”¨å±‚åè®®ï¼Œäº†è§£å¾®æœåŠ¡çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œå¸¸å¸¸åœ¨æœåŠ¡å†…éƒ¨ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ RPC åè®®è¿›è¡ŒæœåŠ¡é—´é€šè®¯ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ HTTPã€‚è¦å¼„æ‡‚è¿™ä¸ªéœ€è¦ä»è¿™ä¸¤ä¸ªåè®®çš„è®¾è®¡åŸç†å‡ºå‘äº†ã€‚


## HTTP åè®®


HTTPçš„è¯·æ±‚æŠ¥æ–‡ç”±å››éƒ¨åˆ†ç»„æˆï¼šè¯·æ±‚è¡Œ(request line)ã€è¯·æ±‚å¤´éƒ¨(header)ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®(request data)


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-80fe-a650-c2a4adbd8fad)


ä¸è¿‡ HTTP åè®®ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©çš„é‡ç‚¹
æ›´å¤šå†…å®¹å¯ä»¥çœ‹ [MDNæ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/HTTP)


## RPC åè®®


### æœ¬åœ°å‡½æ•°è°ƒç”¨


```go
func main() {
	a := 1
	b := 2
	res := add(a, b)
	fmt.Println(res)
	return
}

func add(x, y int) int {
	z := x + y
    return z
}

```


æ‰§è¡Œæ­¥éª¤ï¼š

1. å°†a, bçš„å€¼å‹æ ˆ
1. é€šè¿‡å‡½æ•°æŒ‡é’ˆæ‰¾åˆ°addå‡½æ•°ï¼Œå–å‡ºæ ˆä¸­çš„1 2å¹¶å°†å…¶èµ‹å€¼ç»™x, y
1. è®¡ç®— x + y å¹¶å°†å¾—åˆ°çš„å€¼èµ‹å€¼ç»™z, ç„¶åå‹æ ˆè¿”å›
1. ä»æ ˆä¸­å–å‡ºzçš„å€¼ï¼Œèµ‹å€¼ç»™res

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹ç”Ÿäº§é¡¹ç›®ä¸­å‡ºç°çš„ä¾‹å­


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8018-b611-cbd0c24cdf49)


åƒè¿™ç§è·¨æœåŠ¡çš„è°ƒç”¨éœ€è¦è§£å†³ä¸€äº›é—®é¢˜

- å‡½æ•°æ˜ å°„
- æ•°æ®è½¬åŒ–æˆå­—èŠ‚æµ
- ç½‘ç»œä¼ è¾“

### RPC æ¦‚å¿µæ¨¡å‹


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8025-a9c5-ea0fef34a149)


1984 å¹´ Nelson å‘å¸ƒäº†è®ºæ–‡ã€ŠImplementing Remote Procedure Callsã€‹ï¼Œå…¶ä¸­æå‡ºäº† RPC çš„è¿‡ç¨‹ç”± 5 ä¸ªæ¨¡å‹ç»„æˆ: Userã€User-Stubã€RPC-Runtimeã€Server-Stubã€Server


### ä¸€æ¬¡å®Œæ•´çš„ RPC è¯·æ±‚è¿‡ç¨‹


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8063-bfda-e45a2c0d5c82)

- IDL(Interface Description Language)æ–‡ä»¶ï¼šé€šè¿‡ä¸€ç§ä¸­ç«‹çš„æ–¹å¼æ¥æè¿°æ¥å£ï¼Œä½¿å¾—åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œçš„å¯¹è±¡å’Œç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„ç¨‹åºå¯ä»¥ç›¸äº’é€šä¿¡ã€‚
- ç”Ÿæˆä»£ç ï¼šé€šè¿‡ç¼–è¯‘å™¨æŠŠIDLæ–‡ä»¶è½¬æ¢æˆè¯­è¨€å¯¹åº”çš„é™æ€åº“ã€‚
- ç¼–è§£ç ï¼šä»å†…å­˜ä¸­è¡¨ç¤ºåˆ°å­—èŠ‚åºåˆ—çš„è½¬æ¢ç§°ä½œç¼–ç ï¼Œåä¹‹å«è§£ç ã€‚
- é€šä¿¡åè®®ï¼šè§„èŒƒäº†æ•°æ®åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“å†…å®¹å’Œæ ¼å¼ï¼Œé™¤å¿…é¡»çš„è¯·æ±‚/å“åº”æ•°æ®å¤–ï¼Œè¿˜ä¼šåŒ…å«é¢å¤–çš„å…ƒæ•°æ®ã€‚
- ç½‘ç»œä¼ è¾“ï¼šé€šå¸¸åŸºäºæˆç†Ÿç½‘ç»œåº“èµ°TCP/UDPä¼ è¾“ã€‚

### RPCçš„å¥½å¤„å’Œé—®é¢˜


è¿™æ ·å½“æˆ‘ä»¬ä½¿ç”¨äº† RPC åè®®ä¹‹åï¼Œè°ƒç”¨è¿œç¨‹æœåŠ¡å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ï¼Œåœ¨å¾®æœåŠ¡çš„æ¶æ„ä¸­ä¹Ÿæœ‰å¾ˆå¤šå¥½å¤„

- æœåŠ¡å•ä¸€èŒè´£ï¼Œæ›´åŠ æœ‰åˆ©äºåˆ†å·¥å’Œåä½œ
- æ‰©å±•æ€§æ›´å¼ºï¼Œèµ„æºä½¿ç”¨ç‡æ›´ä¼˜ç§€
- æ•…éšœéš”ç¦»ï¼ŒæœåŠ¡æ•´ä½“æœ‰ç€æ›´é«˜çš„å¯é æ€§

å½“ç„¶ä¹Ÿæœ‰ä¸€äº›é—®é¢˜

- æœåŠ¡å®•æœºäº†æ€ä¹ˆåŠï¼Ÿ
- ç½‘ç»œå¼‚å¸¸æ€ä¹ˆåŠï¼Ÿ
- è¯·æ±‚é‡æ¿€å¢å¯¼è‡´æœåŠ¡æ— æ³•åŠæ—¶å¤„ç†ï¼Œæ€ä¹ˆåŠï¼Ÿ

è¿™äº›é—®é¢˜çš„å¤„ç†å¸¸å¸¸éœ€è¦ RPC æ¡†æ¶æ¥å¸®æˆ‘ä»¬è§£å†³


## RPCæ¡†æ¶


### åˆ†å±‚è®¾è®¡


RPCæ¡†æ¶å¸¸è¢«åˆ†ä¸ºä¸‰å±‚ï¼šç¼–è§£ç å±‚ï¼Œåè®®å±‚ï¼Œç½‘ç»œé€šä¿¡å±‚
è¿™é‡Œçš„åè®®æˆ‘ä»¬ä»¥ Apache çš„ Thrift åè®®ä¸ºä¾‹


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-80ef-9bcc-ecba977bb1f8)


**ç¼–è§£ç å±‚**


ç¼–è§£ç å±‚éœ€è¦é€šè¿‡IDLæ–‡ä»¶ç”Ÿæˆå„ç§è¯­è¨€çš„ä»£ç 


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-806e-b8f2-e9c315bafdcb)


è€Œå®ƒçš„æ•°æ®æ ¼å¼æœ‰å¤šç§

- è¯­è¨€ç‰¹å®šæ ¼å¼ï¼šè®¸å¤šçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰å†…å»ºçš„å°†å†…å­˜å¯¹è±¡ç¼–ç æˆå­—èŠ‚åºåˆ—çš„æ”¯æŒï¼Œæ¯”å¦‚ Java çš„ java.io.Serializable
- æ–‡æœ¬æ ¼å¼ï¼šJSON, XML, CSVç­‰æ–‡æœ¬æ ¼å¼ï¼Œäººç±»æ˜“äºé˜…è¯»
- äºŒè¿›åˆ¶ç¼–ç ï¼šå…·å¤‡è·¨è¯­è¨€å’Œé«˜æ€§èƒ½çš„ä¼˜ç‚¹ï¼Œå¸¸è§æœ‰ Thirft çš„ BinaryProtocol, Google çš„ Protobuf

æˆ‘ä»¬é‡ç‚¹è¯´ä¸€ä¸‹äºŒè¿›åˆ¶ç¼–ç ï¼Œå…¶ä¸­ Thirft æ˜¯åŸºäº TLV ç¼–ç ï¼Œ Protobuf æ˜¯åŸºäº Varint ç¼–ç 


**TLVç¼–ç **


```text
struct Person {
    1: require string        userName,
    2: optional i64          favoriteNumber,
    3: optional list<string> interests
}

```


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8014-a5b3-f89708b808d2)


å› æ­¤åœ¨ RPC æ¡†æ¶çš„ç¼–è§£ç å±‚çš„é€‰å‹ä¸Šå¾€å¾€è€ƒè™‘çš„å› ç´ æ˜¯

- å…¼å®¹æ€§
- é€šç”¨æ€§
- æ€§èƒ½

**åè®®å±‚**


æˆ‘ä»¬ä»æ•°æ®åˆ’åˆ†ä¸Šå¸¸å¸¸æœ‰è¿™ä¹ˆä¸¤ç§

- ç‰¹æ®Šçš„ç»“æŸç¬¦å·ï¼šä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºæ¯ä¸ªåè®®å•å…ƒç»“æŸçš„æ ‡ç¤º

![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-801e-8e65-fe88c60e4369)

- å˜é•¿åè®®ï¼šç”±å®šé•¿éƒ¨åˆ†å’Œä¸å®šé•¿éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­å®šé•¿éƒ¨åˆ†è¦æè¿°ä¸å®šé•¿éƒ¨åˆ†å†…å®¹çš„é•¿åº¦

![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-808a-9ae9-ef8ed07227fa)


**åè®®æ„é€ **


```text
  0 1 2 3 4 5 6 7 8 9 a b c d e f 0 1 2 3 4 5 6 7 8 9 a b c d e f
+----------------------------------------------------------------+
| 0|                          LENGTH                             |
+----------------------------------------------------------------+
| 0|       HEADER MAGIC          |            FLAGS              |
+----------------------------------------------------------------+
|                         SEQUENCE NUMBER                        |
+----------------------------------------------------------------+
| 0|     Header Size(/32)        | ...
+---------------------------------

                  Header is of variable size:
                   (and starts at offset 14)

+----------------------------------------------------------------+
|         PROTOCOL ID  (varint)  |   NUM TRANSFORMS (varint)     |
+----------------------------------------------------------------+
|      TRANSFORM 0 ID (varint)   |        TRANSFORM 0 DATA ...
+----------------------------------------------------------------+
|         ...                              ...                   |
+----------------------------------------------------------------+
|        INFO 0 ID (varint)      |       INFO 0  DATA ...
+----------------------------------------------------------------+
|         ...                              ...                   |
+----------------------------------------------------------------+
|                                                                |
|                              PAYLOAD                           |
|                                                                |
+----------------------------------------------------------------+

```

- LENGTH: æ•°æ®åŒ…å¤§å°ï¼Œä¸åŒ…å«è‡ªèº«
- HEADER MAGIC: æ ‡è¯†ç‰ˆæœ¬ä¿¡æ¯ï¼Œåè®®è§£ææ—¶å¿«é€Ÿæ ¡éªŒ
- SEQUENCE NUMBER: è¡¨ç¤ºæ•°æ®åŒ…çš„ seqIDï¼Œå¯ç”¨äºå¤šè·¯å¤ç”¨ï¼Œå•é“¾æ¥å†…é€’å¢
- HEADER SIZE: å¤´éƒ¨é•¿åº¦ï¼Œä»ç¬¬14ä¸ªå­—ç¬¦å¼€å§‹è®¡ç®—ä¸€ç›´åˆ° PAYLOADå‰
- PROTOCOL ID: ç¼–è§£ç æ–¹å¼ï¼Œæœ‰ Binary å’Œ Compact ä¸¤ç§
- TRANSFORM ID: å‹ç¼©æ–¹å¼ï¼Œå¦‚ zlib å’Œ snappy
- INFO ID: ä¼ é€’ä¸€äº›å®šåˆ¶çš„ meta ä¿¡æ¯
- PAYLOAD: æ¶ˆæ¯ä½“

é‚£ä¹ˆæ¡†æ¶é‡Œé¢æ€ä¹ˆå¯¹æˆ‘ä»¬çš„åè®®è¿›è¡Œè§£æå‘¢


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-804f-a647-d0b4e66d4fab)


**ç½‘ç»œé€šä¿¡å±‚**


å¸¸ç”¨çš„ä¾¿æ˜¯ Socket API


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8076-a617-e57cf9aa8f92)


æ¡†æ¶é€‰æ‹©åˆé€‚çš„ç½‘è·¯åº“éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š

- æ˜“ç”¨çš„APIï¼šå°è£…åº•å±‚ Socket API, è¿æ¥ç®¡ç†å’Œäº‹ä»¶åˆ†å‘
- åŠŸèƒ½ï¼šåè®®æ”¯æŒï¼ˆTCPï¼ŒUDPï¼ŒUDSç­‰ï¼‰ï¼Œä¼˜é›…é€€å‡ºï¼Œé”™è¯¯å¼‚å¸¸ç­‰
- æ€§èƒ½ï¼šåº”ç”¨å±‚çš„ buffer å‡å°‘ copyï¼Œé«˜æ€§èƒ½å®šæ—¶å™¨ï¼Œå¯¹è±¡æ± ç­‰

**æ¡†æ¶**

- Alibaba å¼€æºçš„ Java RPC æ¡†æ¶ Dubbo [https://github.com/apache/dubbo](https://github.com/apache/dubbo)
- Facebook å¼€æºçš„ Apache Thirft [https://github.com/apache/thrift](https://github.com/apache/thrift)
- Google å¼€æºçš„ gPRC [https://github.com/grpc/grpc](https://github.com/grpc/grpc)
- ByteDance å¼€æºçš„ Kitex [https://github.com/cloudwego/kitex](https://github.com/cloudwego/kitex)
- Didi å¼€æºçš„å¾®æœåŠ¡æ¡†æ¶ Go-zero [https://github.com/zeromicro/go-zero](https://github.com/zeromicro/go-zero)
- Bilibili å¼€æºçš„å¾®æœåŠ¡æ¡†æ¶ Kratos [https://github.com/go-kratos/kratos](https://github.com/go-kratos/kratos)
- Spring ä¸‹çš„å¾®æœåŠ¡æ¡†æ¶ Spring Cloud [https://github.com/spring-cloud](https://github.com/spring-cloud)
- å¸¸ä¸ Spring Cloud ç»“åˆçš„ OpenFeign [https://github.com/OpenFeign/feign](https://github.com/OpenFeign/feign)

## æ³¨å†Œä¸­å¿ƒ


åˆšåˆšæˆ‘ä»¬äº†è§£åˆ° RPC ä»¥åŠä¸€äº›æ¡†æ¶ï¼Œä½¿ç”¨ RPC æ¡†æ¶è¿›è¡Œå¼€å‘çš„æœåŠ¡å¾€å¾€éƒ½æ˜¯å¾®æœåŠ¡ï¼Œå¾®æœåŠ¡åˆ™æ˜¯æœåŠ¡äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ï¼Œå› æ­¤åœ¨ä¼ä¸šå®é™…çš„ç”Ÿäº§ä¸­ï¼ŒæœåŠ¡çš„éƒ¨ç½²å¾€å¾€æ˜¯è·¨ä¸»æœºï¼Œç½‘æ®µï¼Œæœºæˆ¿ç”šè‡³çœå¸‚è‡ªæ²»åŒºçš„ã€‚
é‚£ä¹ˆå„ä¸ªæœåŠ¡å¦‚æœæƒ³é€šè¿‡ RPC è°ƒç”¨å°±éœ€è¦çŸ¥é“è¿™ä¸ªæœåŠ¡çš„ IP å’Œç«¯å£å·ï¼Œæ€»ä¸è‡³äºè¯´æˆ‘æŠŠ IP å’Œç«¯å£å·åœ¨ä»£ç é‡Œé¢å†™æ­»å§ï¼Œè¿™ç»å¯¹ä¸æ˜¯ä¸€ç§å¥½çš„åŠæ³•ã€‚å› æ­¤åœ¨æ¶æ„ä¸Šæœ€é‡è¦çš„ä¸€ç¯å°±æ˜¯**æœåŠ¡å‘ç°**ï¼Œå¯¹åº”é‡è¦çš„å°±æ˜¯**æœåŠ¡æ³¨å†Œ**


### æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°


![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-808c-a952-c02ae14eb4db)

- Service B æŠŠè‡ªå·±æ³¨å†Œåˆ° Service Registry å«åš æœåŠ¡æ³¨å†Œ
- Service A ä» Service Registry å‘ç° Service B çš„èŠ‚ç‚¹ä¿¡æ¯å«åš æœåŠ¡å‘ç°

**æœåŠ¡æ³¨å†Œ**


æœåŠ¡æ³¨å†Œæ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„ï¼ŒæœåŠ¡å¯åŠ¨åéœ€è¦æ³¨å†Œï¼Œåˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼š

- å¯åŠ¨æ³¨å†Œï¼šå½“ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹èµ·æ¥ä¹‹åï¼Œéœ€è¦æŠŠè‡ªå·±æ³¨å†Œåˆ° Service Registry ä¸Šï¼Œä¾¿äºå…¶å®ƒèŠ‚ç‚¹æ¥å‘ç°è‡ªå·±ã€‚æ³¨å†Œéœ€è¦åœ¨æœåŠ¡å¯åŠ¨å®Œæˆå¹¶å¯ä»¥æ¥å—è¯·æ±‚æ—¶æ‰ä¼šå»æ³¨å†Œè‡ªå·±ï¼Œå¹¶ä¸”ä¼šè®¾ç½®æœ‰æ•ˆæœŸï¼Œé˜²æ­¢è¿›ç¨‹å¼‚å¸¸é€€å‡ºåä¾ç„¶è¢«è®¿é—®ã€‚
å®šæ—¶ç»­æœŸ
- å®šæ—¶ç»­æœŸï¼šå®šæ—¶ç»­æœŸç›¸å½“äº keep aliveï¼Œå®šæœŸå‘Šè¯‰ Service Registry è‡ªå·±è¿˜åœ¨ï¼Œèƒ½å¤Ÿç»§ç»­æœåŠ¡
- é€€å‡ºæ’¤é”€ï¼šå½“è¿›ç¨‹é€€å‡ºæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¸»åŠ¨å»æ’¤é”€æ³¨å†Œä¿¡æ¯ï¼Œä¾¿äºè°ƒç”¨æ–¹åŠæ—¶å°†è¯·æ±‚åˆ†å‘åˆ°åˆ«çš„èŠ‚ç‚¹ã€‚åŒæ—¶ï¼Œgo-zero é€šè¿‡è‡ªé€‚åº”çš„è´Ÿè½½å‡è¡¡æ¥ä¿è¯å³ä½¿èŠ‚ç‚¹é€€å‡ºæ²¡æœ‰ä¸»åŠ¨æ³¨é”€ï¼Œä¹Ÿèƒ½åŠæ—¶æ‘˜é™¤è¯¥èŠ‚ç‚¹

**æœåŠ¡å‘ç°**


æœåŠ¡å‘ç°æ˜¯é’ˆå¯¹è°ƒç”¨ç«¯çš„ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»é—®é¢˜ï¼š

- å­˜é‡è·å–ï¼šå½“ Service A å¯åŠ¨æ—¶ï¼Œéœ€è¦ä» Service Registry è·å– Service B çš„å·²æœ‰èŠ‚ç‚¹åˆ—è¡¨ï¼šService B1, Service B2, Service B3ï¼Œç„¶åæ ¹æ®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•æ¥é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹å‘é€è¯·æ±‚

![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-80d8-945c-e65e050ce2af)

- å¢é‡ä¾¦å¬ï¼šä¸Šå›¾å·²ç»æœ‰äº† Service B1, Service B2, Service B3ï¼Œå¦‚æœæ­¤æ—¶åˆå¯åŠ¨äº† Service B4ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é€šçŸ¥ Service A æœ‰ä¸ªæ–°å¢çš„èŠ‚ç‚¹

![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8068-8df4-f9151a93e533)

- åº”å¯¹æœåŠ¡å‘ç°æ•…éšœï¼š å½“æœåŠ¡å‘ç°ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ•…éšœè½¬ç§»ç­–ç•¥æ¥ç¡®ä¿æœåŠ¡çš„å¯ç”¨æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸»æœåŠ¡å‘ç°ç³»ç»Ÿå‡ºç°é—®é¢˜ï¼Œç³»ç»Ÿå¯ä»¥åˆ‡æ¢åˆ°å¤‡ä»½çš„æœåŠ¡å‘ç°å®ä¾‹ï¼Œç¡®ä¿ä¾ç„¶å¯ä»¥å‘ç°æœåŠ¡

![](https://whitea.dpdns.org/api?block_id=28493dc3-968c-8060-9083-c99ea7fa3be2)


### æ³¨å†Œä¸­å¿ƒ

- Consul [https://github.com/hashicorp/consul](https://github.com/hashicorp/consul)
- Nacos [https://github.com/alibaba/nacos](https://github.com/alibaba/nacos)
- etcd [https://github.com/etcd-io/etcd](https://github.com/etcd-io/etcd)
- zookeeper [https://github.com/apache/zookeeper](https://github.com/apache/zookeeper)

> ä½œä¸ºä¸€ååç«¯å¼€å‘,æ–‡ç« å­˜åœ¨æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥è”ç³»æˆ‘ï¼Œå½“ç„¶ä¹Ÿæ¬¢è¿ä¸æˆ‘äº¤æµæŠ€æœ¯ç›¸å…³çš„é—®é¢˜ï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ğŸ¤—

