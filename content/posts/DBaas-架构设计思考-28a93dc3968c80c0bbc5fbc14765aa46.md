---
title: "DBaas 架构设计思考"
date: "2025-10-12T02:08:00.000Z"
lastmod: "2025-10-12T02:26:00.000Z"
draft: true
series: []
authors:
  - "Whitea"
tags: []
categories: []
NOTION_METADATA:
  object: "page"
  id: "28a93dc3-968c-80c0-bbc5-fbc14765aa46"
  created_time: "2025-10-12T02:08:00.000Z"
  last_edited_time: "2025-10-12T02:26:00.000Z"
  created_by:
    object: "user"
    id: "102d872b-594c-81b1-ab63-0002c10e95af"
  last_edited_by:
    object: "user"
    id: "102d872b-594c-81b1-ab63-0002c10e95af"
  cover: null
  icon: null
  parent:
    type: "database_id"
    database_id: "28393dc3-968c-8157-9edc-c528b069ca6f"
  archived: false
  in_trash: false
  is_locked: false
  properties:
    series:
      id: "B%3C%3FS"
      type: "multi_select"
      multi_select: []
    date:
      id: "C%3CqD"
      type: "date"
      date: null
    draft:
      id: "JiWU"
      type: "checkbox"
      checkbox: true
    authors:
      id: "bK%3B%5B"
      type: "people"
      people:
        - object: "user"
          id: "102d872b-594c-81b1-ab63-0002c10e95af"
          name: "Whitea"
          avatar_url: "https://s3-us-west-2.amazonaws.com/public.notion-static.com/529138\
            7a-5664-4f8d-a6b4-c9f1e5bc89da/avater.png"
          type: "person"
          person:
            email: "whitea0029@gmail.com"
    custom-front-matter:
      id: "c~kA"
      type: "rich_text"
      rich_text: []
    tags:
      id: "jw%7CC"
      type: "multi_select"
      multi_select: []
    categories:
      id: "nbY%3F"
      type: "multi_select"
      multi_select: []
    Last edited time:
      id: "vbGE"
      type: "last_edited_time"
      last_edited_time: "2025-10-12T02:26:00.000Z"
    summary:
      id: "x%3AlD"
      type: "rich_text"
      rich_text: []
    Name:
      id: "title"
      type: "title"
      title:
        - type: "text"
          text:
            content: "DBaas 架构设计思考"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "DBaas 架构设计思考"
          href: null
  url: "https://www.notion.so/DBaas-28a93dc3968c80c0bbc5fbc14765aa46"
  public_url: null
MANAGED_BY_NOTION_HUGO: true

---


关于 DBaas 演进过程主要 3 种可能的设计方案


**方案一**


用户登录前先选择云厂商，然后通过 DNS 将请求路由到各个厂商的 API 网关，在各自内部完成资源调度、实例部署、提供服务的完整链路，每朵云上都是完整的平台服务


参考 [datadog](https://app.datadoghq.com/account/login?next=%2F)，实现思路类似，先选择 region 才能登录系统，用户数据在每个 region 都是独立的


![](https://whitea.dpdns.org/api?block_id=28a93dc3-968c-8040-b7de-fe24c2f5a595)


开发上线快，架构简单。但单云架构，数据不同步，且存在云厂商锁定风险


**方案二**


每朵云上都是完整的平台服务，由 GSLB 在所有可用站点之间分配负载来优化流量


数据库服务使用一套，DBaaS DB 同时为多云提供服务能力有以下几种选择：

1. 数据库的 endpoint 通过公网访问
1. 打通跨云专线双向同步数据，数据库需要自己提供

互联网业务的异地多活架构，每朵云类比一个容灾机房，数据需要跨机房同步


![](https://whitea.dpdns.org/api?block_id=28a93dc3-968c-800f-9467-c95afaa8700a)

